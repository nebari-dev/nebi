# Development overrides for local k3d environment
# These values override the defaults in values.yaml

## Image configuration for local development
image:
  pullPolicy: Never  # Use locally built images, don't pull from registry
  tag: "latest"

## Service configuration for local access
service:
  type: NodePort
  nodePort: 30080  # Fixed port for consistent local access

## Resource limits - relaxed for local dev
## Increased memory to support pixi installing real packages (numpy, pandas, etc.)
resources:
  requests:
    memory: "128Mi"
    cpu: "50m"
  limits:
    memory: "1Gi"
    cpu: "500m"

## Persistence - use k3s local-path for dev
persistence:
  data:
    storageClass: "local-path"
    accessMode: ReadWriteOnce
    size: 2Gi

  environments:
    storageClass: "local-path"
    accessMode: ReadWriteOnce  # local-path doesn't support ReadWriteMany
    size: 10Gi

## Application configuration for development
config:
  ginMode: debug
  logLevel: debug
  logFormat: text

## Default admin user (created on first startup if no users exist)
admin:
  username: "admin"
  password: "admin123"
  email: "admin@darb.local"

## Health probes - faster for development
livenessProbe:
  initialDelaySeconds: 5
  periodSeconds: 15

readinessProbe:
  initialDelaySeconds: 3
  periodSeconds: 5

## Database configuration - SQLite for development
database:
  driver: sqlite
  dsn: "/app/data/darb.db"
  maxIdleConns: 5
  maxOpenConns: 10
  connMaxLifetime: 30

## Queue configuration - Memory queue for development
queue:
  type: memory
  valkeyAddr: ""

## PostgreSQL - disabled for development
postgres:
  enabled: false

## Valkey - disabled for development
valkey:
  enabled: false

## Worker - single pod in development (API + Worker together)
worker:
  separateDeployment: false
